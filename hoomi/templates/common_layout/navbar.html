{% load static %}
<nav class="navbar navbar-expand-lg navbar-dark bg-primary px-4 shadow">
  <a class="navbar-brand  d-flex align-items-center gap-0.1" href="#">
    <img src="{% static 'images/home_icon.png' %}" alt="Home" width="50" height="50" style="margin-bottom: 4px;">
    <span >Hoomi</span>
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="#">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Browse Rentals</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="property/post_property">Post Property</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
    </ul>

    <form class="d-flex me-3" role="search">
      <input class="form-control me-3 " type="search" placeholder="Search homes..." aria-label="Search">
      <button class="btn btn-light" type="submit">Search</button>
    </form>

    <div class="d-flex gap-2">
      <a href="login" class="btn btn-outline-light">Login</a>
      <a href="register" class="btn btn-warning">Sign Up</a>
    </div>
  </div>
</nav>

<script>
const postPropertyLink = document.querySelector('.nav-link[href="property/post_property"]');

if (postPropertyLink) {
  postPropertyLink.addEventListener('click', function (e) {
    e.preventDefault(); // Prevent default link behavior

    const token = localStorage.getItem("authToken");

    if (!token) {
      // Save the intended URL before redirecting to login
      localStorage.setItem("redirectAfterLogin", "/property/post_property/");
      window.location.href = "login"; // Redirect to your custom login page
    } else {
      window.location.href = "/property/post_property/";
    }
  });
}


</script>
